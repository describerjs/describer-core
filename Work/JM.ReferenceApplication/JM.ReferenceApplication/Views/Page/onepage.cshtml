@using JM.ReferenceApplication.Infrastructure.Models
@using Piranha.Extend.Regions
@using ImageRegion = Piranha.Extend.Regions.ImageRegion
@model Piranha.Models.PageModel

@{
    ViewBag.Title = Model.Page.Title;

	// Gemeinsames Model aus erster Section und Startteasern machen
	var startSection = new OnePageSectionWithTeaserModel
	{
		Section = Model.Region<OnePageSection>("Joinmedia"),
		Teaser1 = Model.Region<TeaserExtension>("StartTeaser1"),
		Teaser2 = Model.Region<TeaserExtension>("StartTeaser2")
	};

	// Navigationsinfos aus den SectionPartials holen
	var navigation = new List<string>();
	foreach (KeyValuePair<string, Object> element in Model.Regions)
	{
		if (element.Value.GetType() == typeof(OnePageSection))
		{
			var navigationName = Model.Region<OnePageSection>(element.Key).NavigationName;
			if (!String.IsNullOrEmpty(navigationName))
			{
				navigation.Add(navigationName);
			}
		}
	}
}

@section Navigation {
	@Html.Partial("_NavigationOnePage", navigation)
}

@Html.Partial("Regions/OnePageSectionAndTeaser", startSection)
@Html.Partial("Regions/OnePageSection", Model.Region<OnePageSection>("Leistungen"))
@Html.Partial("Regions/OnePageSection", Model.Region<OnePageSection>("Kunden"))
@Html.Partial("Regions/OnePageSection", Model.Region<OnePageSection>("Agentur"))
@Html.Partial("Regions/OnePageSection", Model.Region<OnePageSection>("Jobs"))
@Html.Partial("Regions/OnePageSection", Model.Region<OnePageSection>("Kontakt"))